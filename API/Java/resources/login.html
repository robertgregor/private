<!DOCTYPE html>
<html>
<head>
    <title>Remote-home logon page</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="bootstrap.css">
    <link rel="stylesheet" type="text/css" href="login.css">
    <link rel="stylesheet" type="text/css" href="magic.css">
    <script type="text/javascript" src="jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="bootstrap.js"></script>

<script>
    $(function () {
        $("#logon").button().click(function () {
            $("#addLogonResult").html('');
            var userName = $("#userName").val();
            var userPassword = $("#userPassword").val();
            $.ajax({
                url: "/",
                'cache': false,
                type: "get",
                data: "ServiceName=UserManagementService&logon=true&userName="+userName+"&userPassword="+userPassword+"&" + Math.floor((Math.random() * 100) + 1),
                success: function (data) {
                    if(data == 'TRUE') {
                        document.location.reload(true);
                    } else {
                        $("#addLogonResult").html(err_credentials);
                        $("#userName").val('');
                        $("#userPassword").val('');
                    }
                },
                error: function () {
                    alert(err_free_deviceId);
                    $("#userName").val('');
                    $("#userPassword").val('');
                }
            });
        });
        $("#recover").button().click(function () {
            $("#addRecoverResult").html('');
            var userEmail = $("#userEmail").val();
            $.ajax({
                url: "/",
                'cache': false,
                type: "get",
                data: "ServiceName=UserManagementService&recover=true&userEmail="+userEmail+"&" + Math.floor((Math.random() * 100) + 1),
                success: function (data) {
                    if(data == 'TRUE') {
                        $("#addLogonResult").html(ok_recover);
                        $("#userEmail").val('');
                    } else {
                        $("#addLogonResult").html(err_credentials);
                        $("#userEmail").val('');
                    }
                },
                error: function () {
                    alert(err_recover_password);
                    $("#userEmail").val('');
                }
            });
        });
    });

</script>
</head>
<body>
<div class="container">
    <div class="text-center">
        <img src="logo.png" alt="Remote-Home Logo">
    </div>
    <div class="tab-content" align="center">
        <div id="login" class="tab-pane active" align="center">
            <table class="text-center">
                <tr>
                    <td align="center">
                        <form id="logonForm" class="form-signin" align="center">
                            <p class="text-muted text-center">
                                Enter your username and password
                            </p>
                            <input type="text" id="userName" name="userName" placeholder="Username" class="form-control">
                            <input type="password" id="userPassword" name="userPassword" placeholder="Password" class="form-control">
                            <div id="addLogonResult"></div>
                        </form>
                    </td>
                </tr>
                <tr>
                    <td align="center">
                        <div class="text-center" align="center">
                            <button class="btn btn-lg btn-primary btn-block btn-custom" id="logon">Sign in</button>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <div id="forgot" class="tab-pane" align="center">
            <table class="text-center">
                <tr>
                    <td align="center">
                        <form id="recoverForm" class="forgotForm" align="center">
                            <p class="text-muted text-center">
                                Enter your valid e-mail
                            </p>
                            <input type="email" id="userEmail" name="userEmail" placeholder="mail@domain.com" required="required" class="form-control">
                            <div id="addRecoverResult"></div>
                        </form>
                    </td>
                </tr>
                <tr>
                    <td align="center">
                        <div class="text-center" align="center">
                            <button class="btn btn-lg btn-danger btn-block btn-custom" id="recover">Recover Password</button>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="text-center">
        <ul class="list-inline">
            <li><a class="text-muted" href="#login" data-toggle="tab">Login</a></li>
            <li><a class="text-muted" href="#forgot" data-toggle="tab">Forgot Password</a></li>
        </ul>
    </div>
</div>
<script>
    $('.list-inline li > a').click(function() {
        var activeForm = $(this).attr('href') + ' > form';
        //console.log(activeForm);
        $(activeForm).addClass('magictime swap');
        //set timer to 1 seconds, after that, unload the magic animation
        setTimeout(function() {
            $(activeForm).removeClass('magictime swap');
        }, 1000);
    });
</script>
</body>
</html>